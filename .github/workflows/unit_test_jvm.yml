#name: JVM Unit Tests
#
#on:
#  push:
#    branches: [main, development]
#  pull_request:
#  workflow_dispatch:
#
#concurrency:
#  group: ${{ github.workflow }}-${{ github.ref }}
#  cancel-in-progress: true
#
#jobs:
#  badge:
#    env:
#        SENTRY_BASE_URL_ANDROID: ${{secrets.SENTRY_BASE_URL_ANDROID}}
#        SENTRY_AUTH_TOKEN: ${{secrets.SENTRY_AUTH_TOKEN}}
#    runs-on: ubuntu-latest
#    steps:
#      - uses: actions/checkout@v4
#
#      - name: Set up JDK
#        uses: actions/setup-java@v4
#        with:
#          java-version: '17'
#          distribution: 'zulu'
#
#      - name: Run JVM unit tests
#        run: ./gradlew testDebugUnitTest -Pkover koverXmlReport
#
#      - name: Store code coverage into environment variable
#        if: github.ref == 'refs/heads/development'
#        run: echo "COVERAGE=$(${{github.workspace}}/gradlew -q printLineCoverage)" >> $GITHUB_ENV
#
#      - name: Add coverage Report to PR
#        id: jacoco
#        uses: madrapps/jacoco-report@v1.7.1
#        with:
#          paths: |
#              ${{ github.workspace }}/build/reports/kover/report.xml
#          token: ${{ secrets.GITHUB_TOKEN }}
#          update-comment: true
#          title: Code Coverage
#          min-coverage-overall: 85
#          min-coverage-changed-files: 85
#
#      - name: Update dynamic badge gist
#        if: github.ref == 'refs/heads/development'
#        uses: schneegans/dynamic-badges-action@v1.7.0
#        with:
#          auth: ${{secrets.SECRET_GITHUB_GIST}}
#          gistID: 129c8d4608ea11b81849152dba085532
#          filename: superdiary-badge.json
#          label: coverage
#          message: ${{env.COVERAGE}}%
#          valColorRange: ${{env.COVERAGE}}
#          minColorRange: 0
#          maxColorRange: 100
